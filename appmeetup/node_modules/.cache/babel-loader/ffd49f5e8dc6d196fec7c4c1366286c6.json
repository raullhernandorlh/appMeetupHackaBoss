{"remainingRequest":"/home/raul/Documentos/appMeetup/appmeetup/node_modules/babel-loader/lib/index.js!/home/raul/Documentos/appMeetup/appmeetup/src/api/utils.js","dependencies":[{"path":"/home/raul/Documentos/appMeetup/appmeetup/src/api/utils.js","mtime":1596221637567},{"path":"/home/raul/Documentos/appMeetup/appmeetup/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raul/Documentos/appMeetup/appmeetup/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGp3dCBmcm9tICdqd3QtZGVjb2RlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKdmFyIEVORFBPSU5UID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODg4OCc7CmV4cG9ydCBmdW5jdGlvbiBsb2dpbih1c2VyLCBwYXNzd29yZCkgewogIHRyeSB7CiAgICBheGlvcy5wb3N0KCIiLmNvbmNhdChFTkRQT0lOVCwgIi9hdXRoIiksIHsKICAgICAgdXNlcjogdXNlciwKICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7IC8vIEkga2VlcCB0aGUgdG9rZW4KCiAgICAgIHNldEF1dGhUb2tlbihyZXNwb25zZS5kYXRhLnRva2VuKTsgLy8gSSBrZWVwIHRoZSByb2xlCgogICAgICBzZXRJc0FkbWluKHJlc3BvbnNlLmRhdGEuYWRtaW4pOwogICAgfSk7CiAgfSBjYXRjaCAoZXJyb3IpIHsKICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICB9Cn0gLy8gRnVuY3Rpb24gdG8gc2F2ZSBsb2NhbHN0b3JhZ2UgaW4ganNvbndlYnRva2VuCgpleHBvcnQgZnVuY3Rpb24gc2V0QXV0aFRva2VuKHRva2VuKSB7CiAgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9ICJCZWFyZXIgIi5jb25jYXQodG9rZW4pOwogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdBVVRIX1RPS0VOX0tFWScsIHRva2VuKTsKfSAvLyBGdWNudGlvbiB0byByZXRyaWV2ZSB0aGUgdG9rZW4gZnJvbSBsb2NhbCBzdG9yYWdlCgpleHBvcnQgZnVuY3Rpb24gZ2V0QXV0aFRva2VuKCkgewogIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQVVUSF9UT0tFTl9LRVknKTsKfSAvL0Z1bmN0aW9uIHRvIGdldCB0aGUgZXhwaXJhdGlvIGRhdGUgb2YgdGhlIHRva2VuCgpleHBvcnQgZnVuY3Rpb24gdG9rZW5FeHBpcmF0aW9uKGVuY29kZWRUb2tlbikgewogIHZhciB0b2tlbiA9IGp3dChlbmNvZGVkVG9rZW4pOwoKICBpZiAoIXRva2VuLmV4cCkgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApOwogIGRhdGUuc2V0VVRDU2Vjb25kcyh0b2tlbi5leHApOwogIHJldHVybiBkYXRlOwp9IC8vIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBvcGVyYXRpb25hbCBvciBub3QgCgpleHBvcnQgZnVuY3Rpb24gaXNFeHBpcmVkKHRva2VuKSB7CiAgdmFyIGV4cGlyYXRpb25EYXRlID0gdG9rZW5FeHBpcmF0aW9uKHRva2VuKTsKICByZXR1cm4gZXhwaXJhdGlvbkRhdGUgPCBuZXcgRGF0ZSgpOwp9IC8vIEZ1bmN0aW9uIHRoYXQgY2hlY2tzIGlmIHRoZSBwZXJzb24gaXMgbG9nZ2VkIGFuZCBpZiB0aGUgdG9rZW4gaXMgdmFsaWQKCmV4cG9ydCBmdW5jdGlvbiBpc0xvZ2dlZEluKCkgewogIC8vIENvbnNlZ3VpbW9zIGVsIHRva2VuIGRlIGxhIGZ1bmNpb24gYW50ZXJpb3IKICB2YXIgYXV0aFRva2VuID0gZ2V0QXV0aFRva2VuKCk7IC8vIFNpIHRpZW5lcyB0b2tlbiB5IGVzdGUgbm8gZXN0YSBlc3BpcmFkbyBwdWVkZXMgcGFzYXIgc2kgbm8gcmV0dWVuCgogIHJldHVybiAhIWF1dGhUb2tlbiAmJiAhaXNFeHBpcmVkKGF1dGhUb2tlbik7Cn0gLy8gRnVuY3Rpb24gdG8gc2F2ZSBhZG1pbiBpbiB0aGUgZGF0YWJhc2UKLy8gImFkbWluIiBpcyBhIHZhbHVlIHJlZXRyaWV2ZWQgZnJvbSB0aGUgZGF0YWJhc2UKCmV4cG9ydCBmdW5jdGlvbiBzZXRJc0FkbWluKGFkbWluKSB7CiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1JPTEUnLCBhZG1pbik7Cn0gLy8gRnVuY3Rpb24gdG8gcmV0cmlldmUgYWRtaW4gZnJvbSBsb2NhbFN0b3JhZ2UKCmV4cG9ydCBmdW5jdGlvbiBnZXRJc0FkbWluKCkgewogIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnUk9MRScpOwp9IC8vIEZ1bmN0aW9uIHRvIGtub3cgaWYgaXQgaXMgYWRtaW4gb3Igbm90IAoKZXhwb3J0IGZ1bmN0aW9uIGNoZWNrSXNBZG1pbigpIHsKICB2YXIgcm9sZSA9IG51bGw7CiAgdmFyIGFkbWluID0gZ2V0SXNBZG1pbigpOyAvLyBZb3UgaGF2ZSB0byBtYWtlIGEgYm9vbGVhbiBzdHJ1Y3R1cmUgYmVjYXVzZSBldmVyeXRoaW5nIHRoYXQgaXMgc2F2ZWQgaW4gIkxvY2FsU3RvcmFnZSIKICAvLyBpcyBpbiBzdHJpbmcgCgogIGlmIChhZG1pbiA9PT0gJ3RydWUnKSB7CiAgICByb2xlID0gdHJ1ZTsKICB9IGVsc2UgewogICAgcm9sZSA9IGZhbHNlOwogIH0KCiAgcmV0dXJuIHJvbGU7Cn0gLy8gTG9nb3V0IGZ1bmN0aW9uCgpleHBvcnQgZnVuY3Rpb24gbG9nb3V0KCkgewogIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uWydBdXRob3JpemF0aW9uJ10gPSAnJzsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnQVVUSF9UT0tFTl9LRVknKTsKICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnUk9MRScpOwp9"},{"version":3,"sources":["/home/raul/Documentos/appMeetup/appmeetup/src/api/utils.js"],"names":["jwt","axios","ENDPOINT","login","user","password","post","then","response","console","log","setAuthToken","data","token","setIsAdmin","admin","error","defaults","headers","common","localStorage","setItem","getAuthToken","getItem","tokenExpiration","encodedToken","exp","date","Date","setUTCSeconds","isExpired","expirationDate","isLoggedIn","authToken","getIsAdmin","checkIsAdmin","role","logout","removeItem"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,YAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAMC,QAAQ,GAAG,uBAAjB;AAEA,OAAO,SAASC,KAAT,CAAeC,IAAf,EAAoBC,QAApB,EAA6B;AAChC,MAAG;AACCJ,IAAAA,KAAK,CAACK,IAAN,WAAcJ,QAAd,YAA+B;AAC3BE,MAAAA,IAAI,EAAGA,IADoB;AAE3BC,MAAAA,QAAQ,EAAGA;AAFgB,KAA/B,EAICE,IAJD,CAIM,UAASC,QAAT,EAAkB;AACpBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ,EADoB,CAEpB;;AACAG,MAAAA,YAAY,CAACH,QAAQ,CAACI,IAAT,CAAcC,KAAf,CAAZ,CAHoB,CAIpB;;AACAC,MAAAA,UAAU,CAACN,QAAQ,CAACI,IAAT,CAAcG,KAAf,CAAV;AACH,KAVD;AAWH,GAZD,CAYC,OAAMC,KAAN,EAAY;AACTP,IAAAA,OAAO,CAACC,GAAR,CAAYM,KAAZ;AACH;AACJ,C,CAGD;;AAEA,OAAO,SAASL,YAAT,CAAsBE,KAAtB,EAA4B;AAC/BZ,EAAAA,KAAK,CAACgB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,qBAA2DN,KAA3D;AACAO,EAAAA,YAAY,CAACC,OAAb,CAAqB,gBAArB,EAAuCR,KAAvC;AACH,C,CAGD;;AAEA,OAAO,SAASS,YAAT,GAAuB;AAC1B,SAAOF,YAAY,CAACG,OAAb,CAAqB,gBAArB,CAAP;AACH,C,CAED;;AAEA,OAAO,SAASC,eAAT,CAAyBC,YAAzB,EAAsC;AACzC,MAAIZ,KAAK,GAAGb,GAAG,CAACyB,YAAD,CAAf;;AACA,MAAG,CAACZ,KAAK,CAACa,GAAV,EAAc;AACV,WAAO,IAAP;AACH;;AACD,MAAIC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAAT,CAAX;AACAD,EAAAA,IAAI,CAACE,aAAL,CAAmBhB,KAAK,CAACa,GAAzB;AACA,SAAOC,IAAP;AACH,C,CAED;;AAEA,OAAO,SAASG,SAAT,CAAmBjB,KAAnB,EAAyB;AAC5B,MAAIkB,cAAc,GAAGP,eAAe,CAACX,KAAD,CAApC;AACA,SAAOkB,cAAc,GAAG,IAAIH,IAAJ,EAAxB;AACH,C,CAGD;;AAEA,OAAO,SAASI,UAAT,GAAqB;AACxB;AACA,MAAIC,SAAS,GAAGX,YAAY,EAA5B,CAFwB,CAGxB;;AACA,SAAO,CAAC,CAACW,SAAF,IAAe,CAACH,SAAS,CAACG,SAAD,CAAhC;AACH,C,CAED;AAEA;;AAEA,OAAO,SAASnB,UAAT,CAAoBC,KAApB,EAA0B;AAC7BK,EAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA4BN,KAA5B;AACH,C,CAED;;AAEA,OAAO,SAASmB,UAAT,GAAqB;AACxB,SAAOd,YAAY,CAACG,OAAb,CAAqB,MAArB,CAAP;AACH,C,CAED;;AAEA,OAAO,SAASY,YAAT,GAAuB;AAC1B,MAAIC,IAAI,GAAG,IAAX;AACA,MAAIrB,KAAK,GAAGmB,UAAU,EAAtB,CAF0B,CAI1B;AACA;;AAEA,MAAGnB,KAAK,KAAK,MAAb,EAAoB;AAChBqB,IAAAA,IAAI,GAAG,IAAP;AACH,GAFD,MAEK;AACDA,IAAAA,IAAI,GAAC,KAAL;AACH;;AACD,SAAOA,IAAP;AACH,C,CAED;;AAEA,OAAO,SAASC,MAAT,GAAiB;AACpBpC,EAAAA,KAAK,CAACgB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,EAAjD;AACAC,EAAAA,YAAY,CAACkB,UAAb,CAAwB,gBAAxB;AACAlB,EAAAA,YAAY,CAACkB,UAAb,CAAwB,MAAxB;AACH","sourcesContent":["import jwt from 'jwt-decode'\nimport axios from 'axios'\n\nconst ENDPOINT = 'http://localhost:8888'\n\nexport function login(user,password){\n    try{\n        axios.post(`${ENDPOINT}/auth`, {\n            user : user,\n            password : password, \n        })\n        .then(function(response){\n            console.log(response)\n            // I keep the token\n            setAuthToken(response.data.token)\n            // I keep the role\n            setIsAdmin(response.data.admin)\n        })\n    }catch(error){\n        console.log(error);\n    }\n}\n\n\n// Function to save localstorage in jsonwebtoken\n\nexport function setAuthToken(token){\n    axios.defaults.headers.common['Authorization'] = `Bearer ${token}`\n    localStorage.setItem('AUTH_TOKEN_KEY', token)\n}\n\n\n// Fucntion to retrieve the token from local storage\n\nexport function getAuthToken(){\n    return localStorage.getItem('AUTH_TOKEN_KEY')\n}\n\n//Function to get the expiratio date of the token\n\nexport function tokenExpiration(encodedToken){\n    let token = jwt(encodedToken)\n    if(!token.exp){\n        return null\n    }\n    let date = new Date(0)\n    date.setUTCSeconds(token.exp)\n    return date\n}\n\n// Function to check if the token is operational or not \n\nexport function isExpired(token){\n    let expirationDate = tokenExpiration(token)\n    return expirationDate < new Date()\n}\n\n\n// Function that checks if the person is logged and if the token is valid\n\nexport function isLoggedIn(){\n    // Conseguimos el token de la funcion anterior\n    let authToken = getAuthToken();\n    // Si tienes token y este no esta espirado puedes pasar si no retuen\n    return !!authToken && !isExpired(authToken)\n}\n\n// Function to save admin in the database\n\n// \"admin\" is a value reetrieved from the database\n\nexport function setIsAdmin(admin){\n    localStorage.setItem('ROLE',admin)\n}\n\n// Function to retrieve admin from localStorage\n\nexport function getIsAdmin(){\n    return localStorage.getItem('ROLE')\n}\n\n// Function to know if it is admin or not \n\nexport function checkIsAdmin(){\n    let role = null\n    let admin = getIsAdmin()\n\n    // You have to make a boolean structure because everything that is saved in \"LocalStorage\"\n    // is in string \n\n    if(admin === 'true'){\n        role = true\n    }else{\n        role=false\n    }\n    return role\n}\n\n// Logout function\n\nexport function logout(){\n    axios.defaults.headers.common['Authorization'] = ''\n    localStorage.removeItem('AUTH_TOKEN_KEY')\n    localStorage.removeItem('ROLE')\n}\n\n\n"]}]}