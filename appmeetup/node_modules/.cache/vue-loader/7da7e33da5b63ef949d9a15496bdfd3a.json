{"remainingRequest":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/src/components/Reservation/OrganizerReservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/src/components/Reservation/OrganizerReservation.vue","mtime":1598432359026},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG5vUmF0aW5nc0Zvck1lZXR1cCB9IGZyb20gIkAvdXRpbGl0aWVzL3N3ZWV0YWxlcnQtbW9kYWxzIjsKaW1wb3J0IHsgZm9ybWF0LCBhZGRNaW51dGVzIH0gZnJvbSAiZGF0ZS1mbnMiOwppbXBvcnQgZXMgZnJvbSAiZGF0ZS1mbnMvbG9jYWxlL2VzIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIgppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCIKaW1wb3J0IHsgZ2V0QXV0aFRva2VuIH0gZnJvbSAiQC9hcGkvdXRpbHMuanMiOwoKZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZToiT3JnYW5pemVyUmVzZXJ2YXRpb24iLAoKICAgICBmaWx0ZXJzOiB7CiAgICAgICAgIHByaWNlRmlsdGVyKHZhbHVlKSB7CiAgICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHsgcmV0dXJuICItLS0iOyB9CiAgICAgICAgICBpZiAodmFsdWUgPT09IDApewogICAgICAgICAgICByZXR1cm4gJ0ZSRUUnCiAgICAgICAgICB9CiAgICAgICAgICBlbHNlewogICAgICAgICAgICAgcmV0dXJuIHZhbHVlICsgJyDigqwnOwogICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBkYXRhKCl7CiAgICAgICAgcmV0dXJuewogICAgICAgICAgICBwYXltZW50X2RldGFpbDpbXSwKICAgICAgICAgICAgcGFpZF9vdXQ6IiIsCiAgICAgICAgICAgIG5vdFBheTowLAogICAgICAgICAgICBpZDpudWxsLAogICAgICAgICAgICBhdmdfcmF0aW5nOiIiLAogICAgICAgICAgICB2YWxvcmF0aW9uOiIiLAogICAgICAgICAgICBzZWVWYWxvcmF0aW9uTW9kYWw6ZmFsc2UsCiAgICAgICAgICAgIHNlZVRpY2tldFBheW1lbnRNb2RhbDpmYWxzZSwKICAgICAgICAgICAgbWVldHVwSWQ6IiIsCiAgICAgICAgICAgIG1lZXR1cERhdGU6IiIsCiAgICAgICAgICAgIHJlc2VydmF0aW9uRGF0ZToiIiwKICAgICAgICAgICAgcmVzZXJ2YXRpb25JZDoiIgogICAgICAgIH0KICAgIH0sCgogICAgCiAgICBwcm9wczp7CiAgICAgICAgcmVzZXJ2YXRpb246IE9iamVjdAogICAgfSwKCiAgICBtZXRob2RzOnsKCgogICAgICAgIC8vIEVudmlhbmRvIGVsIGluZGV4IGRlIGxhIHJlc2VydmEKICAgICAgICBzZW5kUmVzZXJ2YXRpb25JbmRleChyZXNlcnZhdGlvbklkKXsKICAgICAgICAgICAgbGV0IHJlc2VydmF0aW9uSW5kZXggPSByZXNlcnZhdGlvbklkCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2luZGV4UmVzZXJ2YXRpb24nLHJlc2VydmF0aW9uSW5kZXgpCiAgICAgICAgfSwKCiAgICAgICAgLy8gRXZpYW5kbyB0b2RvcyBsb3MgZGF0b3MgZGUgbGEgUmVzZXJ2YQogICAgICAgIHNlbmREYXRhUmVzZXJ2YXRpb24ocmVzZXJ2YXRpb24pewogICAgICAgICAgICBsZXQgZGF0YVJlc2VydmF0aW9uID0gdGhpcy5yZXNlcnZhdGlvbgogICAgICAgICAgICB0aGlzLiRlbWl0KCdyZXNlcnZhdGlvbkRhdGEnLGRhdGFSZXNlcnZhdGlvbikKICAgICAgICB9LAoKICAgICAgICAgICAvLyBJbnNlcnRhciBlbCBkYXRvIG1ldGlkbyBwb3IgZWwgbW9kYWwgY29uIGVzdGEgZnVuY2lvbgogICAgYXN5bmMgaW5zZXJ0UmF0aW5nKCkgewogICAgICAgY29uc3QgbWVldHVwRGF0ZSA9IHRoaXMubWVldHVwRGF0ZTsKICAgICAgIGNvbnNvbGUubG9nKG1lZXR1cERhdGUpCiAgICAgIAogICAgICAgY29uc3QgbWVldHVwSWQgPSB0aGlzLm1lZXR1cElkOwogICAgICAgIGNvbnNvbGUubG9nKG1lZXR1cElkKQogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdCgKICAgICAgICAgIGBodHRwOi8vbG9jYWxob3N0Ojg4ODgvcmF0aW5ncy8ke21lZXR1cElkfWAsCiAgICAgICAgICB7CiAgICAgICAgICAgIHZhbG9yYXRpb246IHRoaXMudmFsb3JhdGlvbiwKICAgICAgICAgICAgbWVldHVwX2RhdGU6IG1lZXR1cERhdGUsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgQXV0aG9yaXphdGlvbjogZ2V0QXV0aFRva2VuKCksCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKTsKCiAgICAgICAgLy8gdGhpcy5zZWFyY2htZWV0dXBzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfQogICAgfSwKCiAgICAgYXZnUmF0aW5nKHJhdGluZ0luZGV4KSB7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KCJodHRwOi8vbG9jYWxob3N0Ojg4ODgvcmF0aW5ncy9hdmcvIiArIHJhdGluZ0luZGV4LCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGdldEF1dGhUb2tlbigpLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuZGF0YS5tZWRpYSA9PT0gbnVsbCkgewogICAgICAgICAgICBub1JhdGluZ3NGb3JNZWV0dXAoKTsKICAgICAgICAgIH0KCiAgICAgICAgICBzZWxmLmF2Z19yYXRpbmcgPSByZXNwb25zZS5kYXRhLmRhdGEubWVkaWE7CiAgICAgICAgfSkKICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgfSk7CiAgICAgIH0sCgogICAgICBwYXltZW50RGV0YWlsKG1lZXR1cElkKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVudHJhIGFsIHBheW1lbnQgZGV0YWlsIikKCiAgICAgIHRoaXMuc2VlVGlja2V0UGF5bWVudE1vZGFsPXRydWU7CiAgICAgIHZhciBzZWxmID0gdGhpczsKICAgICAgYXhpb3MKICAgICAgICAuZ2V0KGBodHRwOi8vbG9jYWxob3N0Ojg4ODgvcGF5bWVudHMvJHttZWV0dXBJZH1gLCB7CiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGdldEF1dGhUb2tlbigpLAogICAgICAgICAgfSwKICAgICAgICB9KQogICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgc2VsZi5wYXltZW50X2RldGFpbCA9IHJlc3BvbnNlLmRhdGEuZGF0YVswXTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9KTsKICAgICAgfSwKCgogICAgICAgLy8gQWJyaXIgZWwgTW9kYWwKICAgIG9wZW5Nb2RhbChtZWV0dXBEYXRlLCBtZWV0dXBJZCkgewogICAgICB0aGlzLnNlZVZhbG9yYXRpb25Nb2RhbCA9IHRydWU7CiAgICAgIHRoaXMubWVldHVwRGF0ZSA9IG1lZXR1cERhdGU7CiAgICAgIHRoaXMubWVldHVwSWQgPSBtZWV0dXBJZDsKICAgIH0sCgoKICAKCgogIH0KfQo="},{"version":3,"sources":["OrganizerReservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;;;;AAMA;AACA","file":"OrganizerReservation.vue","sourceRoot":"src/components/Reservation","sourcesContent":["<template>\n    <div class=\"reservations\">\n      <article>\n        <!-- TODO Falta poner esta comprobacion que no se muy bien como va -->\n      <div v-if=\"reservation === undefined\">\n            You do not have any real reservations. Click on the following link to go to the search engine and be able to book a meetup\n            <router-link :to=\"{name: 'search'}\">Go To Meetups Search</router-link>\n      </div>\n      <div v-else class=\"user-reservations\" >\n\n                <h3>Meetup Resume </h3>\n                    <p class=\"user-text\">{{ reservation.title}}</p>\n                    <p class=\"user-text\"><span> Date</span>{{reservation.date | mydate}}</p>\n                    <p class=\"user-text\"><span>  Hour</span>{{ reservation.time}}</p>\n\n                    <h3>Reservation Resume</h3>\n                    <p class=\"user-text\"><span>  Date</span>{{ reservation.reservation_date | mydateandhour}}</p>\n                    <p class=\"user-text\"><span>Price</span>{{ reservation.reservation_price | priceFilter}}</p>\n                    <p class=\"user-text\"><span>Avg Rating</span>{{avg_rating}}</p>\n                    \n                     <!-- <p :class=\"{red: reservation.paid_out == notPay, green: reservation.paid_out != notPay}\"><span>Paid Out</span>{{ reservation.paid_out}}</p> -->\n                     <!-- Payment Status -->\n                     <p v-if=\"reservation.paid_out == 0\">NOT PAID</p>\n                    \n                    <div class=\"buttons\">\n                        <button title=\"Delete a Reservation\" @click=\"sendReservationIndex(reservation.id)\"><fa-icon :icon=\"['fas','trash-alt']\" size=\"2x\" /></button>\n                        <button title=\" Rate The Meetup\" @click=\"openModal(reservation.date,reservation.id)\"><fa-icon :icon=\"['fas','star']\" size=\"2x\" /></button>\n                        <button title=\"Avg Rating\" @click=\"avgRating(reservation.id)\"><fa-icon :icon=\"['fas','smile']\" size=\"2x\" /></button>\n                        <button title = \"Meetup Information\" @click=\"sendDataReservation(reservation)\"><fa-icon :icon=\"['fas','info-circle']\" size=\"2x\" /></button>\n                         <!-- Enviando el id a Payment para sacar los datos de la reserva -->\n                         <button @click=\"paymentDetail(reservation.id)\" v-if=\"reservation.paid_out == 1\">Ticket</button>\n                         <router-link :to=\"{name:'Payment',params: {id:reservation.id }}\">\n                         <button :class=\"{disable_button: reservation.paid_out != notPay}\"><fa-icon :icon=\"['fas','shopping-cart']\" size=\"2x\" /></button>\n                         </router-link>\n                    </div>\n              </div>\n      </article>\n    \n            <button title=\"Return to Organizer Menu\" class=\"return\"><router-link :to='{name:\"UserProfile\"}'><fa-icon :icon=\"['fas','step-backward']\" size=\"2x\" /></router-link></button>\n    \n    <!-- Make a Valoration Modal -->\n    <div v-show=\"seeValorationModal\" class=\"modalContainer\">\n      <div class=\"modalBoxValoration\">\n        <h3>Introduce Your Valoration</h3>\n        <input type=\"number\" class=\"valoration-input\" v-model=\"valoration\" />\n        <button @click=\" insertRating()\">Make Valoration</button>\n        <button @click=\"seeValorationModal =! seeValorationModal\"><fa-icon :icon=\"['fas','times']\" size=\"2x\" /></button>\n      </div>\n    </div>\n\n    <!-- Payment Receipt Modal -->\n\n    <div v-show=\"seeTicketPaymentModal\" class=\"modalContainer\">\n      <div class=\"modalBoxPayment\">\n        <h3>Payment Ticket </h3>\n          <p class=\"user-text\"><span> Meetup Name</span>{{payment_detail.meetup_name}}</p>\n          <p class=\"user-text\"><span> Meetup Price</span>{{ payment_detail.reservation_price | priceFilter}}</p>\n          <p class=\"user-text\"><span> Payment Time</span>{{ payment_detail.date}}</p>\n          <p class=\"user-text\"><span> Payment Hour</span>{{ payment_detail.time}}</p>\n        <button @click=\"seeTicketPaymentModal =! seeTicketPaymentModal\"><fa-icon :icon=\"['fas','times']\" size=\"2x\" /></button>\n      </div>\n    </div>\n\n\n  </div>\n</template>\n\n<script>\nimport { noRatingsForMeetup } from \"@/utilities/sweetalert-modals\";\nimport { format, addMinutes } from \"date-fns\";\nimport es from \"date-fns/locale/es\";\nimport axios from \"axios\"\nimport moment from \"moment\"\nimport { getAuthToken } from \"@/api/utils.js\";\n\nexport default {\n    name:\"OrganizerReservation\",\n\n     filters: {\n         priceFilter(value) {\n          if (value === null) { return \"---\"; }\n          if (value === 0){\n            return 'FREE'\n          }\n          else{\n             return value + ' €';\n          }\n        }\n    },\n    data(){\n        return{\n            payment_detail:[],\n            paid_out:\"\",\n            notPay:0,\n            id:null,\n            avg_rating:\"\",\n            valoration:\"\",\n            seeValorationModal:false,\n            seeTicketPaymentModal:false,\n            meetupId:\"\",\n            meetupDate:\"\",\n            reservationDate:\"\",\n            reservationId:\"\"\n        }\n    },\n\n    \n    props:{\n        reservation: Object\n    },\n\n    methods:{\n\n\n        // Enviando el index de la reserva\n        sendReservationIndex(reservationId){\n            let reservationIndex = reservationId\n            this.$emit('indexReservation',reservationIndex)\n        },\n\n        // Eviando todos los datos de la Reserva\n        sendDataReservation(reservation){\n            let dataReservation = this.reservation\n            this.$emit('reservationData',dataReservation)\n        },\n\n           // Insertar el dato metido por el modal con esta funcion\n    async insertRating() {\n       const meetupDate = this.meetupDate;\n       console.log(meetupDate)\n      \n       const meetupId = this.meetupId;\n        console.log(meetupId)\n      try {\n        const response = await axios.post(\n          `http://localhost:8888/ratings/${meetupId}`,\n          {\n            valoration: this.valoration,\n            meetup_date: meetupDate,\n          },\n          {\n            headers: {\n              Authorization: getAuthToken(),\n            },\n          }\n        );\n\n        // this.searchmeetups = response.data.data;\n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n     avgRating(ratingIndex) {\n      var self = this;\n      axios\n        .get(\"http://localhost:8888/ratings/avg/\" + ratingIndex, {\n          headers: {\n            Authorization: getAuthToken(),\n          },\n        })\n        .then(function (response) {\n          if (response.data.data.media === null) {\n            noRatingsForMeetup();\n          }\n\n          self.avg_rating = response.data.data.media;\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n      },\n\n      paymentDetail(meetupId) {\n        console.log(\"Entra al payment detail\")\n\n      this.seeTicketPaymentModal=true;\n      var self = this;\n      axios\n        .get(`http://localhost:8888/payments/${meetupId}`, {\n          headers: {\n            Authorization: getAuthToken(),\n          },\n        })\n        .then(function (response) {\n          self.payment_detail = response.data.data[0];\n        })\n        .catch(function (error) {\n          console.log(error);\n        });\n      },\n\n\n       // Abrir el Modal\n    openModal(meetupDate, meetupId) {\n      this.seeValorationModal = true;\n      this.meetupDate = meetupDate;\n      this.meetupId = meetupId;\n    },\n\n\n  \n\n\n  }\n}\n</script>\n\n\n\n<style scoped>\n\n/* Center and position modal */\n\n.modalContainer {\n  position: fixed;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  width:100%;\n  background:rgb(0,0,0,0.5)\n}\n\n/* Valoration Modal Class */\n\n.modalBoxValoration{\n  display:flex;\n  flex-direction: column;\n  align-items:center;\n  background-color:#fff;\n  margin:10% auto;\n  padding: 3rem;\n  width:45%;\n  border:3px solid #00a896;\n  border-radius:12px;\n\n}\n\n/* Payment Modal Class */\n.modalBoxPayment{\n  display:flex;\n  flex-direction: column;\n  align-items:center;\n  background-color:#fff;\n  margin:10% auto;\n  padding: 3rem;\n  width:30%;\n  border:3px solid #00a896;\n  border-radius:12px;\n\n}\n\n.valoration-input{\n  border-radius:8rem;\n  border-color: 3px solid \n}\n\n/* Reservation Object Style */\n.reservations {\n  display: flex;\n  align-items: center;\n  margin-top:4rem;\n  margin-bottom:7rem;\n}\n\n.user-reservations{\n  display: flex;\n  flex-direction:column;\n  width: 80%;\n  max-width:30rem;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  margin-bottom: 5rem;\n  background-color:#fff;\n  border:3px solid #00a896;\n  border-radius:3rem;\n}\n\n\nspan{\n margin-right:1.5rem;\n}\n\n\nbutton{\n    width: 7rem;\n    height:2.5rem;\n    margin:0.5rem;\n    border-radius:20rem;\n    border: 3px solid #fff;\n    background-color:#00a896;\n    color:white;\n    cursor:pointer;\n}\n\nbutton:hover{\n    border: 3px solid #00a896;\n    background-color:#fff;\n    color:#00a896;\n\n}\n\n.return{\n    \n   position:absolute;\n   right:0;\n   top:85%;\n}\n\nbutton a{\n    text-decoration:none;\n    color:#fff;\n}\n\nbutton a:hover{\n    color:#00a896\n}\n\n.disable_button{\n  visibility:hidden;\n}\n\nh2{\n  margin-top:4rem;\n}\n\n</style>"]}]}