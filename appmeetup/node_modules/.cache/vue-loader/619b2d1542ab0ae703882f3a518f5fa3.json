{"remainingRequest":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/src/components/Reservation/UserReservation.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/src/components/Reservation/UserReservation.vue","mtime":1598982089674},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/raul/Escritorio/Copias De Seguridad/Copia de Seguridad 13 de Agosto/appMeetup/appmeetup/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgoKaW1wb3J0IHsgbm9SYXRpbmdzRm9yTWVldHVwIH0gZnJvbSAiQC91dGlsaXRpZXMvc3dlZXRhbGVydC1tb2RhbHMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgbW9tZW50IGZyb20gIm1vbWVudCI7CmltcG9ydCB7IGdldEF1dGhUb2tlbiB9IGZyb20gIkAvYXBpL3V0aWxzLmpzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyUmVzZXJ2YXRpb24iLAoKICBwcm9wczogewogICAgcmVzZXJ2YXRpb246e3R5cGU6T2JqZWN0LHJlcXVpcmVkIDp0cnVlfQogIH0sCgogIGZpbHRlcnM6IHsKICAgICAgICAgcHJpY2VGaWx0ZXIodmFsdWUpIHsKICAgICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgeyByZXR1cm4gIi0tLSI7IH0KICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCl7CiAgICAgICAgICAgIHJldHVybiAnRlJFRScKICAgICAgICAgIH0KICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICByZXR1cm4gdmFsdWUgKyAnIOKCrCc7CiAgICAgICAgICB9CiAgICAgICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwYXltZW50X2RldGFpbDpbXSwKICAgICAgcGFpZF9vdXQ6ICIiLAogICAgICBub3RQYXk6IDAsCiAgICAgIGlkOiBudWxsLAogICAgICBhdmdfcmF0aW5nOiAiIiwKICAgICAgdmFsb3JhdGlvbjogIiIsCiAgICAgIHNlZVZhbG9yYXRpb25Nb2RhbDogZmFsc2UsCiAgICAgIHNlZVRpY2tldFBheW1lbnRNb2RhbDpmYWxzZSwKICAgICAgbWVldHVwSWQ6IiIsCiAgICAgIG1lZXR1cERhdGU6ICIiLAogICAgICByZXNlcnZhdGlvbkRhdGU6ICIiLAogICAgICByZXNlcnZhdGlvbklkOiAiIiwKICAgIH0KICB9LAoKCiAgY29tcHV0ZWQ6ewogICAgaXNMb2FkZWQoKXsKICAgICAgcmV0dXJuIHRoaXMucmVzZXJ2YXRpb24gIT09IG51bGw7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewoKICAgIC8vIEVudmlhbmRvIGVsIGluZGV4IGRlIGxhIHJlc2VydmEKICAgIHNlbmRSZXNlcnZhdGlvbkluZGV4KHJlc2VydmF0aW9uSWQpIHsKICAgICAgbGV0IHJlc2VydmF0aW9uSW5kZXggPSByZXNlcnZhdGlvbklkCiAgICAgIHRoaXMuJGVtaXQoImluZGV4UmVzZXJ2YXRpb24iLCByZXNlcnZhdGlvbkluZGV4KTsKICAgIH0sCgogICAgLy9FbnZpYW5kbyB0b2RvcyBsb3MgZGF0b3MgZGUgbGEgcmVzZXJ2YQogICAgc2VuZERhdGFSZXNlcnZhdGlvbihyZXNlcnZhdGlvbikgewogICAgICBsZXQgZGF0YVJlc2VydmF0aW9uID0gdGhpcy5yZXNlcnZhdGlvbjsKICAgICAgdGhpcy4kZW1pdCgicmVzZXJ2YXRpb25EYXRhIiwgZGF0YVJlc2VydmF0aW9uKTsKICAgIH0sCgogICAgLy8gSW5zZXJ0YXIgZWwgZGF0byBtZXRpZG8gcG9yIGVsIG1vZGFsIGNvbiBlc3RhIGZ1bmNpb24KICAgIGFzeW5jIGluc2VydFJhdGluZygpIHsKICAgICAgIGNvbnN0IG1lZXR1cERhdGUgPSB0aGlzLm1lZXR1cERhdGU7CiAgICAgICBjb25zdCBtZWV0dXBJZCA9IHRoaXMubWVldHVwSWQ7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KAogICAgICAgICAgYGh0dHA6Ly9sb2NhbGhvc3Q6ODg4OC9yYXRpbmdzLyR7bWVldHVwSWR9YCwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsb3JhdGlvbjogdGhpcy52YWxvcmF0aW9uLAogICAgICAgICAgICBtZWV0dXBfZGF0ZTogbWVldHVwRGF0ZSwKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBnZXRBdXRoVG9rZW4oKSwKICAgICAgICAgICAgfSwKICAgICAgICAgIH0pCgogICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICBpY29uOiAic3VjY2VzcyIsCiAgICAgICAgICB0aXRsZTogIlJhdGluZyBBZGRlZCIsCiAgICAgICAgICB0ZXh0OiAiVGhlIHJhdGluZyB3YXMgYWRkZWQgc3VjY2Vzc2Z1bGx5IiwKICAgICAgICB9KTsKCiAgICAgICAgCiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGF2Z1JhdGluZyhyYXRpbmdJbmRleCkgewogICAgICB0cnl7CiAgICAgICAgICBjb25zdCByZXNwb25zZSA9ICBhd2FpdCBheGlvcy5nZXQoCiAgICAgICAgICAgICJodHRwOi8vbG9jYWxob3N0Ojg4ODgvcmF0aW5ncy9hdmcvIiArIHJhdGluZ0luZGV4LCB7CiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGdldEF1dGhUb2tlbigpLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIAogICAgICAgICAgIH0pCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhLm1lZGlhID09PSBudWxsKSB7CiAgICAgICAgICBub1JhdGluZ3NGb3JNZWV0dXAoKTsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuYXZnX3JhdGluZyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICB9Y2F0Y2goZXJyb3IpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICB9OwogICAgICB9LAoKICAgIGFzeW5jIHBheW1lbnREZXRhaWwobWVldHVwSWQpIHsKICAgICAgdGhpcy5zZWVUaWNrZXRQYXltZW50TW9kYWw9dHJ1ZTsKICAgICAgdHJ5ewogICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cDovL2xvY2FsaG9zdDo4ODg4L3BheW1lbnRzLyR7bWVldHVwSWR9YCwgewogICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICBBdXRob3JpemF0aW9uOiBnZXRBdXRoVG9rZW4oKSwKICAgICAgICAgIH0sCiAgICAgICAgfSkKICAgICAgICB0aGlzLnBheW1lbnRfZGV0YWlsID0gcmVzcG9uc2UuZGF0YS5kYXRhWzBdOwogICAgICAgIH1jYXRjaChlcnJvcikgewogICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH07CiAgICAgIH0sCgoKICAgIC8vIEFicmlyIGVsIE1vZGFsCiAgICBvcGVuTW9kYWwobWVldHVwRGF0ZSwgbWVldHVwSWQpIHsKICAgICAgdGhpcy5zZWVWYWxvcmF0aW9uTW9kYWwgPSB0cnVlOwogICAgICB0aGlzLm1lZXR1cERhdGUgPSBtZWV0dXBEYXRlOwogICAgICB0aGlzLm1lZXR1cElkID0gbWVldHVwSWQ7CiAgICB9LAoKICB9LAoKICBjcmVhdGVkICgpewogICAgdGhpcy5hdmdSYXRpbmcodGhpcy5yZXNlcnZhdGlvbi5pZCkKICB9Cn07Cg=="},{"version":3,"sources":["UserReservation.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA","file":"UserReservation.vue","sourceRoot":"src/components/Reservation","sourcesContent":["<template>\n  <div class=\"reservations\">\n    <article>\n          <h3>Meetup Resume </h3>\n              <p class=\"user-text\"><span> Meetup Title</span>{{ reservation.title}}</p>\n              <p class=\"user-text\"><span> Meetup Date</span>{{ reservation.date | mydate}}</p>\n              <p class=\"user-text\"><span> Meetup Hour</span>{{ reservation.time}}</p>\n\n              <h3>Reservation Resume</h3>\n              <p class=\"user-text\"><span> Reservation Date</span>{{ reservation.reservation_date | mydateandhour }}</p>\n              <p class=\"user-text\"><span>Reservation Price</span>{{ reservation.reservation_price | priceFilter}}</p>\n              <span>Total {{ avg_rating.media }} / Number of Votes {{ avg_rating.votes_number }} </span>\n              \n  \n              <p  v-if=\"reservation.paid_out == 0\">NOT PAID</p>\n\n          <div class=\"buttons\">\n            <button title=\"Delete Reservation\" @click=\"sendReservationIndex(reservation.id)\"><fa-icon :icon=\"['fas','trash-alt']\" size=\"2x\" /></button>\n            <button title=\" Rate The Meetup\" @click=\"openModal(reservation.date,reservation.id)\"><fa-icon :icon=\"['fas','star']\" size=\"2x\" /></button>\n            <button title=\"Avg Rating\" @click=\"avgRating(reservation.id)\"><fa-icon :icon=\"['fas','smile']\" size=\"2x\" /></button> \n            <button title=\"Meetup Information\" @click=\"sendDataReservation(reservation)\"><fa-icon :icon=\"['fas','info-circle']\" size=\"2x\" /></button>\n            <button @click=\"paymentDetail(reservation.id)\" v-if=\"reservation.paid_out == 1\"><fa-icon :icon=\"['fas','ticket-alt']\" size=\"2x\" /></button>\n            <!-- Enviado el id a Payment para sacar los datos de la reserva -->\n            <router-link :to=\"{name:'Payment',params: {id:reservation.id }}\">\n            <button :class=\"{disable_button: reservation.paid_out != notPay}\" title=\"Buy Meetup\"><fa-icon :icon=\"['fas','shopping-cart']\" size=\"2x\" /></button>\n            </router-link>\n        </div>\n  </article>\n\n   <button title=\"Return to Organizer Menu\" class=\"return\"><router-link :to=\"{name:'UserProfile' }\"><fa-icon :icon=\"['fas','step-backward']\" size=\"2x\" /></router-link></button>\n\n    <!-- Make a Valoration Modal -->\n    <div v-show=\"seeValorationModal\" class=\"modalConatiner\">\n      <div class=\"modalBoxValoration\">\n        <h3>Introduce Your Valoration</h3>\n        \n        <input type=\"number\" class=\"valoration-input\" v-model=\"valoration\" />\n        <div v-if=\"valoration > 5\"> The valoration must be between 0 and 5 </div>\n        <div v-else>\n        <button @click=\" insertRating()\">Make Valoration</button>\n        <button @click=\"seeValorationModal =! seeValorationModal\"><fa-icon :icon=\"['fas','times']\" size=\"2x\" /></button>\n        </div>\n      </div>\n    </div>\n   \n\n     <!-- Payment Receipt Modal -->\n\n    <div v-show=\"seeTicketPaymentModal\" class=\"modalContainer\">\n      <div class=\"modalBoxPayment\">\n        <h3>Payment Ticket </h3>\n          <p class=\"\"><span> Meetup Name</span>{{payment_detail.meetup_name}}</p>\n          <p class=\"user-text\"><span> Meetup Price</span>{{ payment_detail.reservation_price}}</p>\n          <p class=\"user-text\"><span> Payment Time</span>{{ payment_detail.date}}</p>\n          <p class=\"user-text\"><span> Payment Hour</span>{{ payment_detail.time}}</p>\n        <button @click=\"seeTicketPaymentModal =! seeTicketPaymentModal\"><fa-icon :icon=\"['fas','times']\" size=\"2x\" /></button>\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\n\nimport { noRatingsForMeetup } from \"@/utilities/sweetalert-modals\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport { getAuthToken } from \"@/api/utils.js\";\nexport default {\n  name: \"UserReservation\",\n\n  props: {\n    reservation:{type:Object,required :true}\n  },\n\n  filters: {\n         priceFilter(value) {\n          if (value === null) { return \"---\"; }\n          if (value === 0){\n            return 'FREE'\n          }\n          else{\n             return value + ' €';\n          }\n        }\n  },\n\n  data() {\n    return {\n      payment_detail:[],\n      paid_out: \"\",\n      notPay: 0,\n      id: null,\n      avg_rating: \"\",\n      valoration: \"\",\n      seeValorationModal: false,\n      seeTicketPaymentModal:false,\n      meetupId:\"\",\n      meetupDate: \"\",\n      reservationDate: \"\",\n      reservationId: \"\",\n    }\n  },\n\n\n  computed:{\n    isLoaded(){\n      return this.reservation !== null;\n    }\n  },\n\n  methods: {\n\n    // Enviando el index de la reserva\n    sendReservationIndex(reservationId) {\n      let reservationIndex = reservationId\n      this.$emit(\"indexReservation\", reservationIndex);\n    },\n\n    //Enviando todos los datos de la reserva\n    sendDataReservation(reservation) {\n      let dataReservation = this.reservation;\n      this.$emit(\"reservationData\", dataReservation);\n    },\n\n    // Insertar el dato metido por el modal con esta funcion\n    async insertRating() {\n       const meetupDate = this.meetupDate;\n       const meetupId = this.meetupId;\n      try {\n        const response = await axios.post(\n          `http://localhost:8888/ratings/${meetupId}`,\n          {\n            valoration: this.valoration,\n            meetup_date: meetupDate,\n          },\n          {\n            headers: {\n              Authorization: getAuthToken(),\n            },\n          })\n\n        Swal.fire({\n          icon: \"success\",\n          title: \"Rating Added\",\n          text: \"The rating was added successfully\",\n        });\n\n        \n      } catch (error) {\n        console.log(error);\n      }\n    },\n\n    async avgRating(ratingIndex) {\n      try{\n          const response =  await axios.get(\n            \"http://localhost:8888/ratings/avg/\" + ratingIndex, {\n                headers: {\n                  Authorization: getAuthToken(),\n                },\n                \n           })\n          if (response.data.data.media === null) {\n          noRatingsForMeetup();\n          }\n          this.avg_rating = response.data.data;\n        }catch(error) {\n          console.log(error);\n        };\n      },\n\n    async paymentDetail(meetupId) {\n      this.seeTicketPaymentModal=true;\n      try{\n      const response = await axios.get(`http://localhost:8888/payments/${meetupId}`, {\n          headers: {\n            Authorization: getAuthToken(),\n          },\n        })\n        this.payment_detail = response.data.data[0];\n        }catch(error) {\n          console.log(error);\n        };\n      },\n\n\n    // Abrir el Modal\n    openModal(meetupDate, meetupId) {\n      this.seeValorationModal = true;\n      this.meetupDate = meetupDate;\n      this.meetupId = meetupId;\n    },\n\n  },\n\n  created (){\n    this.avgRating(this.reservation.id)\n  }\n};\n</script>\n\n\n\n<style scoped>\n\n/* Valoration Modal Classes */\n\n.modalContainer {\n  position: fixed;\n  top:0;\n  left:0;\n  right:0;\n  bottom:0;\n  width:100%;\n  background:rgb(0,0,0,0.5)\n}\n\n.modalBoxValoration{\n  display:flex;\n  flex-direction: column;\n  align-items:center;\n  background-color:#fff;\n  margin:10% auto;\n  padding: 3rem;\n  width:45%;\n  border:3px solid #00a896;\n  border-radius:12px;\n}\n\n.valoration-input{\n  border-radius: 8rem;\n  border:3px solid ;\n}\n\n\n/* Payment Modal Class */\n\n.modalBoxPayment{\n  \n  display:flex;\n  flex-direction: column;\n  align-items:center;\n  background-color:#fff;  \n  margin:10% auto;\n  padding: 3rem;\n  width:30%;\n  border:8px solid #00a896;\n  border-radius:16px;\n  font-family:'Helvetica';\n  font-size:1rem;\n  transform: rotate(-5deg);\n}\n\n/* Reservation Object Style */\n\n.reservations {\n  display: flex;\n  align-items: center;\n  margin-top:4rem;\n  margin-bottom:7rem\n}\n\n.user-reservations{\n  display: flex;\n  flex-direction:column;\n  width: 80%;\n  max-width:30rem;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  margin-bottom: 5rem;\n  background-color:#fff;\n  border:3px solid #00a896;\n  border-radius:3rem;\n}\n\n/* article{\n  display: flex;\n  flex-direction:column;\n  width: 80%;\n  max-width:30rem;\n  justify-content: space-between;\n  align-items: center;\n  flex-wrap: wrap;\n  margin-bottom: 5rem;\n  background-color:#fff;\n  border:3px solid #00a896;\n  border-radius:3rem;\n} */\n\nspan{\n margin-right:1.5rem;\n}\n\n\nbutton {\n  width: 7rem;\n  height: 2.5rem;\n  margin: 0.5rem;\n  border-radius: 20rem;\n  border: 3px solid #fff;\n  background-color: #00a896;\n  color: white;\n  cursor: pointer;\n}\n\nbutton:hover {\n  border: 3px solid #00a896;\n  background-color: #fff;\n  color: #00a896;\n}\n\nbutton a{\n    text-decoration:none;\n    color:#fff;\n}\n\nbutton a:hover{\n    color:#00a896\n}\n\n.return {\n  position: absolute;\n  right: 0;\n  top: 85%;\n}\n\n\n.return a{\n  color:#fff;\n}\n\n\n.disable_button{\n  visibility:hidden;\n}\n\nh2{\n  margin-top:4rem;\n}\n\n.ticketSpan{\n  font-style: oblique;\n  text-transform: uppercase;\n  color:#00a896;\n}\n\n\n</style>"]}]}